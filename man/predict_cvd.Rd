% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/predict_cvd.R
\name{predict_cvd}
\alias{predict_cvd}
\title{Predict CVD Outcomes Using Trained Model}
\usage{
predict_cvd(model_obj, new_data)
}
\arguments{
\item{model_obj}{A list from \code{train_cvd_rf()} containing:
\itemize{
\item \code{model}: Trained random forest model.
\item \code{prep_recipe}: Fitted preprocessing recipe.
\item \code{positive_level}: Positive class label ("CVD").
}}

\item{new_data}{A \code{data.frame}/\code{tibble} of new data (must match columns of \code{preprocess_heart_data()} output).}
}
\value{
A \code{data.frame} with 2 columns for end-users/Shiny app:
\itemize{
\item \code{input_features}: Original input features (for transparency).
\item \code{predicted_cvd}: Categorical prediction ("CVD" or "NoCVD", per BIO215 classification requirement).
}
}
\description{
Generates \strong{class predictions} (not probabilities, per BIO215 R package requirement) for new data
using the trained random forest model from \code{train_cvd_rf()}. Applies preprocessing (via fitted recipe)
to ensure compatibility with the model.
}
\details{
Critical compliance with BIO215 R package rubrics:
\enumerate{
\item \strong{Input/Output Requirements}:
\itemize{
\item Input: Accepts \code{data.frame} (compatible with Shiny file uploads/manual entry).
\item Output: Returns \strong{class labels} (not probabilities) as required for classification tasks.
}
\item \strong{Leakage Prevention}: Applies preprocessing via \code{model_obj$prep_recipe} (fitted on training data) to new data.
\item \strong{User-Friendliness}: Includes original input features in output for transparency (e.g., Shiny app users can verify inputs).
}
}
\examples{
# Load preprocessed data and train model
cleaned_data <- preprocess_heart_data("data/heart_data.csv")
cvd_model <- train_cvd_rf(cleaned_data)

# Create sample new data (e.g., from Shiny manual input)
new_patient <- tibble::tibble(
  age = 25000,  # ~68 years (25000 days / 365.25)
  gender = 2,   # Male
  height = 175, # cm
  weight = 80,  # kg
  ap_hi = 140,  # Systolic BP
  ap_lo = 90,   # Diastolic BP
  cholesterol = 2,  # Above normal
  gluc = 1,     # Normal
  smoke = 0,    # Non-smoker
  alco = 0,     # Non-drinker
  active = 1    # Physically active
)

# Preprocess new data (match training data format)
preprocessed_new <- preprocess_heart_data(new_patient)  # Treat new data as "dataset"

# Predict CVD outcome
prediction <- predict_cvd(cvd_model, preprocessed_new)
print(prediction)
}
